(()=>{"use strict";var e,t,a,n={4740:(e,t,a)=>{var n=a(3696),r=a(7470),o=a(1813),s=a(2893),i=a(8681),l=a(8448),g=a(4489),c=a(7243);class A{static baseUrl="https://api.themoviedb.org/3";static apiKey="c8017a429e7392ce4c187b672916a252";static bearerToken="eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJjODAxN2E0MjllNzM5MmNlNGMxODdiNjcyOTE2YTI1MiIsIm5iZiI6MTczNjM4MzY4Ny42NjYsInN1YiI6IjY3N2YxY2M3NjFhODczOTUyYzdiMWUyNyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.k0alA8Sw6qv17s4O6dVpvEDCTdafNjw58WeevKz5b9w";static sessionId=null;static imgUrl="https://image.tmdb.org/t/p/w500";static async getGuestSession(){if(console.log(Date.parse(localStorage.getItem("expires_at")),Date.now(),Date.parse(localStorage.getItem("expires_at"))>Date.now(),null!==localStorage.getItem("expires_at")),localStorage.getItem("expires_at")&&Date.parse(localStorage.getItem("expires_at"))>Date.now())return console.log("сессия валидна"),void(this.sessionId=localStorage.getItem("guest_session_id"));const e={method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${this.bearerToken}`}};return await fetch(`${this.baseUrl}/authentication/guest_session/new?api_key=${this.apiKey}`,e).then((e=>e.json())).then((e=>(localStorage.setItem("guest_session_id",e.guest_session_id),localStorage.setItem("expires_at",e.expires_at),this.sessionId=e.guest_session_id,e.guest_session_id))).catch((e=>e))}static async getMovies(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const a={method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${this.bearerToken}`}};return await fetch(`${this.baseUrl}/search/movie?query=${e}&include_adult=false&language=ru-RU&page=${t}&api_key=${this.apiKey}`,a).then((e=>e.json())).catch((e=>e))}static async getGenres(){const e={method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${this.bearerToken}`}};return await fetch(`${this.baseUrl}/genre/movie/list?language=en`,e).then((e=>e.json())).then((e=>e)).catch((e=>e))}static async getRatedMovies(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t={method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${this.bearerToken}`}};return await fetch(`${this.baseUrl}/guest_session/${this.sessionId}/rated/movies?language=en-US&page=${e}&sort_by=created_at.desc`,t).then((e=>e.json())).then((e=>{if(!1===e.success)throw new Error(e.status_message);return e}))}static async addRating(e,t){const a={value:t},n={method:"POST",headers:{accept:"application/json","Content-Type":"application/json;charset=utf-8",Authorization:`Bearer ${this.bearerToken}`},body:JSON.stringify(a)};fetch(`${this.baseUrl}/movie/${e}/rating?api_key=${this.apiKey}&guest_session_id=${this.sessionId}`,n).then((e=>e.json())).then((e=>console.log(e))).catch((e=>console.error(e)))}}var d=a(4104),u=a(9328),E=a(5290),h=a(7535),p=a(5961),m=a(1409),y=a(594);const Q={query:null,setQuery:()=>{},currentPage:void 0,setCurrentPage:()=>{},totalResults:void 0,setTotalResults:()=>{},genres:[],movieRatedIds:[],setMovieRatedIds:()=>{}},f=(0,n.createContext)(Q),{Title:v,Paragraph:I}=E.A,B={body:{boxShadow:"0 4px 12px rgb(0 0 0 / 15%)",height:"auto",columnGap:"20px",width:"451px",maxHeight:"279px",overflow:"hidden"},title:{fontSize:"20px",fontWeight:"400",textAlign:"start",lineHeight:"28px",verticalAlign:"middle"},ratingWrapper:{borderRadius:"50%",padding:"5px",height:"fit-content",width:"fit-content",fontSize:"12px"},releaseDate:{fontSize:"14px",textAlign:"start",color:u.wm[3]},genre:{padding:"2px 4px 3px 5px",fontSize:"12px",fontWeight:"400",lineHeight:"100%",color:u.wm[3]},description:{fontSize:"14px",textAlign:"start",wordBreak:"break-all"}};const S=e=>{let{description:t,genreIds:a,releaseDate:r,title:o,posterURL:s,ratingAverage:i,id:l}=e;const g=(0,n.useRef)(null);(0,n.useEffect)((()=>{null!==g.current&&function(e){const t=function(e){let t=0;for(const a of e.parentNode.childNodes)t+=a.clientHeight+parseInt(getComputedStyle(a).marginBottom)+parseInt(getComputedStyle(a).marginTop)+parseInt(getComputedStyle(a).paddingTop)+parseInt(getComputedStyle(a).paddingBottom);return t}(e),a=getComputedStyle(e).lineHeight,n=parseInt(a.substring(0,a.length-2)),r=e.parentElement,o=parseFloat(getComputedStyle(r).paddingTop)+parseFloat(getComputedStyle(r).paddingBottom)+parseFloat(getComputedStyle(r).marginTop)+parseFloat(getComputedStyle(r).marginBottom),s=r.clientHeight-o-t,i=Math.floor(s/n),l=Math.floor(e.clientHeight/n)-Math.abs(i);if(i<=0){const t=e.textContent?.substring(0,29*l),a=t?.lastIndexOf(" ");void 0!==a&&(e.textContent=t?.substring(0,a+1)+"...")}}(g.current)}),[]);const c=i>=7?"#66E900":i>=5?"#E9D100":i>=3?"#E97E00":"#E90000",{genres:u,movieRatedIds:E,setMovieRatedIds:Q}=(0,n.useContext)(f),S=a.map((e=>u.find((t=>t.id===e))));return n.createElement(d.A,{style:B.body},n.createElement(h.A,{src:A.imgUrl+s,width:183,height:279,style:{objectFit:"cover"},wrapperStyle:{flex:"none"},fallback:"data:image/png;base64,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"}),n.createElement(d.A,{vertical:!0,style:{padding:"10px 10px 10px 0",width:"100%"}},n.createElement(d.A,{style:{justifyContent:"space-between"}},n.createElement(v,{style:B.title},o),n.createElement("div",{style:{...B.ratingWrapper,border:`2px solid ${c}`}},n.createElement("span",null,i.toFixed(1)))),n.createElement(I,{style:B.releaseDate},(0,y.GP)(Date.parse(0===r.length?"0":r),"MMMM dd, yyyy")),n.createElement(d.A,{gap:"8px",wrap:!0},S.map((e=>n.createElement(p.Ay,{key:e?.id,style:B.genre},e?.name)))),n.createElement(I,{ref:g,style:B.description},t),n.createElement(m.A,{allowHalf:!0,style:{alignSelf:"baseline"},defaultValue:E.find((e=>e.id===l))?.rating??0,count:10,onChange:function(e){A.addRating(l,e),Q((t=>{const a=t.findIndex((e=>e.id===l));return-1!==a?(t[a].rating=e,t):[...t,{id:l,rating:e}]}))}})))};var b=a(7010);const C=e=>{let{currentPage:t,total:a}=e;const{setCurrentPage:r}=n.useContext(f);return n.createElement(b.A,{defaultCurrent:t,total:a,style:{alignSelf:"center"},pageSize:20,showSizeChanger:!1,onChange:e=>r(e)})},x=e=>{let{movies:t,currentPage:a,totalResults:r}=e;return n.createElement(n.Fragment,null,n.createElement(d.A,{style:{gap:"1rem",flexWrap:"wrap",justifyContent:"center"}},t.map((e=>{let{original_title:t,overview:a,release_date:r,genre_ids:o,poster_path:s,id:i,vote_average:l}=e;return n.createElement(S,{key:i,id:i,genreIds:o,title:t,description:a,releaseDate:r,posterURL:s,ratingAverage:l})}))),n.createElement(C,{currentPage:a,total:r}))},N=n.createElement("div",{style:{padding:50,background:"rgba(0, 0, 0, 0.05)",borderRadius:4}}),w=()=>{const[e,t]=(0,n.useState)(null),[a,r]=(0,n.useState)(!0);return(0,n.useEffect)((()=>{A.getRatedMovies().then((e=>{if(!e.hasOwnProperty("status_code")){t(e),r(!1)}})).catch((()=>r(!1)))}),[]),a?n.createElement(l.A,{style:{margin:"auto"},size:"large",tip:"Loading..."},N):e instanceof Error?n.createElement(g.A,{type:"error",message:"При выполнении запроса произошла ошибка",style:{height:"fit-content",margin:"0 auto"}}):0===e?.results.length?n.createElement(g.A,{type:"info",message:"Ничего не нашлось",style:{height:"fit-content",margin:"0 auto"}}):(0,c.isNull)(e)?n.createElement("div",null,"У вас пока нет фильмов которые вы оценили "):n.createElement(x,{currentPage:e.page,movies:e.results,totalResults:e.total_results})};var j=a(1973);const R=()=>{const[e,t]=(0,n.useState)(""),{setQuery:a}=(0,n.useContext)(f);(0,n.useEffect)((()=>{a(e)}),[e]);const r=(0,c.debounce)((function(e){t(e.target.value)}),1e3);return n.createElement(j.A,{placeholder:"Type to search ...",onChange:r,style:{height:"fit-content"}})},J=n.createElement("div",{style:{padding:50,background:"rgba(0, 0, 0, 0.05)",borderRadius:4}}),k=()=>{const[e,t]=(0,n.useState)(Error),[a,r]=(0,n.useState)(!0),{query:o,setCurrentPage:s,setTotalResults:i,currentPage:c,totalResults:d}=(0,n.useContext)(f);return(0,n.useEffect)((()=>{null!==o&&A.getMovies(o,c).then((e=>{if(!e.hasOwnProperty("status_code")){const a=e;t(a),s(a.page),i(a.total_results)}r(!1)}))}),[o,c,d]),a?n.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"20px"}},n.createElement(R,null),n.createElement(l.A,{style:{margin:"auto"},size:"large",tip:"Loading..."},J)):e instanceof Error?n.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"20px"}},n.createElement(R,null),n.createElement(g.A,{type:"error",message:"При выполнении запроса произошла ошибка",style:{height:"fit-content",margin:"0 auto"}})):0===e?.results.length?n.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"20px"}},n.createElement(R,null),n.createElement(g.A,{type:"info",message:"Ничего не нашлось",style:{height:"fit-content",margin:"0 auto"}})):n.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"20px"}},n.createElement(R,null),n.createElement(x,{currentPage:c,totalResults:d,movies:e.results}))},{Content:M}=o.A,z=[{key:"1",label:"Search",children:n.createElement(k,null)},{key:"2",label:"Rated",children:n.createElement(w,null),destroyInactiveTabPane:!0}],P=()=>{const[e,t]=(0,n.useState)(null),[a,r]=(0,n.useState)(void 0),[l,g]=(0,n.useState)(void 0),[c,d]=(0,n.useState)([]),[u,E]=(0,n.useState)([]);return(0,n.useEffect)((()=>{A.getGuestSession(),A.getGenres().then((e=>{if(!e.hasOwnProperty("status_code")){d(e.genres)}})),A.getRatedMovies().then((e=>{if(!e.hasOwnProperty("status_code")){E(e.results.map((e=>({id:e.id,rating:e.rating}))))}})).catch((()=>{E([])}))}),[]),n.createElement(f.Provider,{value:{query:e,setQuery:t,currentPage:a,setCurrentPage:r,totalResults:l,setTotalResults:g,genres:c,movieRatedIds:u,setMovieRatedIds:E}},n.createElement(s.Ay,{theme:{hashed:!1,components:{Rate:{starSize:16,marginXS:5}}}},n.createElement(o.A,{style:{minHeight:"100vh",backgroundColor:"#fff",margin:"0 auto",padding:"31px 20px",maxWidth:"1010px",width:"100%"}},n.createElement(M,{className:"text-center"},n.createElement(i.A,{defaultActiveKey:"1",items:z,style:{display:"flex",flexDirection:"column",flexWrap:"wrap"},tabBarStyle:{margin:"0 auto 20px",width:"fit-content"},centered:!0})))))};window.addEventListener("offline",(()=>{alert("Потеряна связь с космосом! Вы не подключены к интернету! Повторите запрос позже!")})),window.addEventListener("online",(()=>{alert("5 минут полет нормальный:)")})),(0,r.createRoot)(document.getElementById("root")).render(n.createElement(n.StrictMode,null,n.createElement(P,null)))}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={id:e,loaded:!1,exports:{}};return n[e].call(a.exports,a,a.exports,o),a.loaded=!0,a.exports}o.m=n,e=[],o.O=(t,a,n,r)=>{if(!a){var s=1/0;for(c=0;c<e.length;c++){a=e[c][0],n=e[c][1],r=e[c][2];for(var i=!0,l=0;l<a.length;l++)(!1&r||s>=r)&&Object.keys(o.O).every((e=>o.O[e](a[l])))?a.splice(l--,1):(i=!1,r<s&&(s=r));if(i){e.splice(c--,1);var g=n();void 0!==g&&(t=g)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[a,n,r]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},a=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var r=Object.create(null);o.r(r);var s={};t=t||[null,a({}),a([]),a(a)];for(var i=2&n&&e;"object"==typeof i&&!~t.indexOf(i);i=a(i))Object.getOwnPropertyNames(i).forEach((t=>s[t]=()=>e[t]));return s.default=()=>e,o.d(r,s),r},o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={792:0};o.O.j=t=>0===e[t];var t=(t,a)=>{var n,r,s=a[0],i=a[1],l=a[2],g=0;if(s.some((t=>0!==e[t]))){for(n in i)o.o(i,n)&&(o.m[n]=i[n]);if(l)var c=l(o)}for(t&&t(a);g<s.length;g++)r=s[g],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(c)},a=self.webpackChunk=self.webpackChunk||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),o.O(void 0,[715],(()=>o(1001)));var s=o.O(void 0,[715],(()=>o(4740)));s=o.O(s)})();